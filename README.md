[点击前往正在更新的版本项目](https://github.com/jiugulixiaoniu/CWBS-ClassWebsite-V2.0 "正在更新的版本项目")

# 班级官网管理系统：详细项目指南

## 项目全景概述

### 核心定位与价值
本系统是为中小学班级或高校院系定制的轻量级信息管理平台，融合了前端交互界面与后端数据处理能力，实现了班级公告发布、成员权限管理、活动记录展示等核心功能。系统采用前后端分离架构，前端基于HTML/CSS/JavaScript构建直观操作界面，后端通过Python Flask框架提供数据接口支持，适合作为教育场景下的开源实践项目。


## 深度文件解析

### 前端文件矩阵
#### 主功能页面
| 文件名             | 核心功能描述                                                                 | 技术特性                                                                 |
|--------------------|-----------------------------------------------------------------------------|--------------------------------------------------------------------------|
| `main.html`        | 班级官网门户首页，包含轮播公告、成员风采展示、快速导航栏                     | 集成实时时钟组件、CSS动画过渡效果、响应式网格布局                          |
| `admin.html`       | 管理系统控制台，支持用户管理/文章发布/数据统计                                | 采用模态框交互设计、表格数据动态渲染、权限分级显示                        |
| `GuanLi.html`      | 权限管理中心，显示登录状态/操作日志/系统设置                                   | 集成JWT令牌验证、操作记录时间轴、权限树状图                               |

#### 功能辅助页面
| 文件名             | 应用场景                                                               | 特殊设计                                                                 |
|--------------------|------------------------------------------------------------------------|--------------------------------------------------------------------------|
| `Notice.html`      | 班级公告展示页，动态加载`Article/Notice`目录下的通告文件                | 采用瀑布流布局、公告分类标签、阅读次数统计                              |
| `Review.html`      | 活动回顾展示页，聚合`Article/Review`目录下的图文内容                    | 集成图片懒加载、时间线导航、内容搜索功能                                |
| `TreasureBox.html` | 班级资源库（功能待完善），计划支持文件上传/下载管理                      | 预留文件拖拽区域、资源分类筛选组件                                        |

### 后端架构详情
#### 核心逻辑文件
| 文件名       | 模块职责                                                                 | 关键技术点                                                               |
|--------------|--------------------------------------------------------------------------|--------------------------------------------------------------------------|
| `app.py`     | Flask应用主程序，定义API路由/权限校验/数据交互逻辑                        | JWT令牌生成与验证、CORS跨域设置、SQLite与Excel数据同步                    |
| `数据签一.py` | 数据加密与签名模块（功能待完善），计划支持敏感信息加密存储                | 预留RSA非对称加密接口、HMAC消息认证码实现                                |

#### 数据存储体系
```
python/Password/
│
├── class_website.db   # SQLite数据库，存储用户表/权限表/操作记录表
│   ├── users: 用户名, 密码哈希, 权限等级, 封禁状态
│   └── operations: 操作时间, 操作类型, 操作者, 目标用户
│
├── information.xlsx   # Excel备份文件，与数据库双向同步
│   └── Sheet1: 包含用户完整信息的表格
│
├── 密钥.py            # 密钥管理模块，生成JWT签名密钥/数据库加密密钥
│   └── generate_secret(): 生成256位随机密钥
│
└── 密码本.txt         # 明文密码记录（仅开发测试用，生产环境需移除）
    └── 格式: 用户名:密码哈希:权限等级
```

### 样式系统设计
| 样式文件         | 应用范围                          | 设计规范                                                                 |
|------------------|-----------------------------------|--------------------------------------------------------------------------|
| `style.css`      | 全局基础样式，定义颜色/字体/布局基准 | 采用CSS变量管理主题色、使用Flexbox实现响应式布局、定义动画基类           |
| `style_admin.css`| 管理系统专属样式，强调操作区域视觉引导 | 高对比度按钮设计、表格斑马纹配色、模态框遮罩层效果                       |
| `article.css`    | 文章展示页样式，优化长文本阅读体验   | 行高/字间距科学配比、段落首行缩进、代码块语法高亮                        |
注意：music.ogg我们不进行提供，请自行添加
## 功能模块详解

### 用户权限体系
#### 五级权限模型
| 权限等级 | 角色名称       | 操作范围                                                                 |
|----------|----------------|--------------------------------------------------------------------------|
| 5        | 系统开发者     | 可删除任意用户、修改系统配置、管理所有数据                               |
| 4        | 超级管理员     | 可管理用户账号、发布全站公告、查看敏感数据                               |
| 3        | 系统运维员     | 可管理普通用户、发布分类公告、查看操作日志                               |
| 2        | 普通用户       | 可查看公开内容、提交个人资料、参与互动功能                               |
| 1        | 访客           | 仅可查看完全公开内容，无交互权限                                         |

#### 权限控制逻辑
```python
# app.py中的权限校验核心代码
if target_user['permission'] >= 5 and payload['permission'] < 5:
    return jsonify({"error": "禁止操作5级用户"}), 403  # 保护开发者账号
if payload['permission'] <= target_user['permission']:
    return jsonify({"error": "权限不足"}), 403  # 禁止低权限用户操作高权限用户
```

### 文章管理系统
#### 内容存储规范
1. **物理存储**：文章以HTML文件形式存储在`Article/Notice`和`Article/Review`目录下
2. **元数据规范**：
   ```html
   <!-- 文章头部元数据示例 -->
   <meta name="author" content="张三">
   <meta name="publish-time" content="2025-06-01">
   <meta name="category" content="活动通知">
   <meta name="permission" content="2">  <!-- 访问权限等级 -->
   ```
3. **动态加载**：`Notice.html`和`Review.html`通过JavaScript读取目录文件列表并渲染

### 安全机制设计
1. **认证体系**：
   - JWT令牌有效期：24小时
   - 令牌刷新机制：客户端自动检测过期并请求刷新
   - 密码存储：SHA-256加盐哈希（盐值存储在`密钥.py`中）
2. **防护措施**：
   - SQL注入防护：使用参数化查询（`sqlite3`模块原生支持）
   - XSS防护：前端对用户输入进行HTML转义
   - CSRF防护：计划添加Token验证（当前版本待完善）

## 部署与二次开发指南

### 环境搭建步骤
1. **前端环境**：
   ```bash
   # 直接通过浏览器访问HTML文件即可，无需额外环境
   # 推荐使用Live Server插件进行开发调试
   ```

2. **后端环境**：
   ```bash
   # 进入Python目录
   cd Main/python
   
   # 创建虚拟环境（推荐）
   python -m venv venv
   source venv/bin/activate  # Linux/Mac
   venv\Scripts\activate     # Windows
   
   # 安装依赖
   pip install flask flask-cors pandas sqlite3 jwt
   
   # 启动服务
   python app.py
   ```

### 配置参数说明
| 配置项          | 配置方式                  | 默认值                  | 说明                                                                 |
|-----------------|---------------------------|-------------------------|----------------------------------------------------------------------|
| 服务端口        | `app.py`中`app.run(port=)` | 5000                    | 生产环境建议修改为80或443（需配合Nginx等反向代理）                   |
| JWT签名密钥     | 环境变量`SECRET_KEY`       | `dev_secret_key_here`   | 务必在生产环境中设置强随机密钥                                       |
| 数据存储路径    | `app.py`中`DB_PATH`/`EXCEL_PATH` | `./Password/` | 可修改为网络存储路径（需确保服务有访问权限）                         |
| CORS允许域名    | `app.py`中`CORS(app)`      | `*`                     | 开发环境允许所有域名，生产环境应限制为具体域名                       |

### 二次开发建议
1. **功能扩展方向**：
   - 添加文件上传模块，实现班级资源共享
   - 开发移动端适配界面，提升移动设备访问体验
   - 集成在线投票/问卷功能，增强班级互动性
2. **技术优化点**：
   - 引入Redis实现缓存加速，提升高并发性能
   - 增加单元测试覆盖率，确保功能稳定性
   - 优化数据库索引，提升查询效率

## 开源协议与贡献指南

### GPL-3协议要点
1. 本项目遵循GPL-3开源协议，允许：
   - 自由使用、修改、分发本软件
   - 基于本软件进行二次开发
2. 限制条件：
   - 商业使用需获得作者书面许可
   - 衍生作品必须保持开源并沿用GPL-3协议
   - 版权声明不得移除或修改

### 贡献流程
1. Fork本仓库到个人账号
2. 创建功能分支：`git checkout -b feature/new-function`
3. 提交代码变更并添加清晰的提交说明
4. 提交Pull Request，注明功能描述和测试方法
5. 维护者将在3个工作日内进行代码审查

### 问题反馈模板
```
### 问题描述
[简要描述问题现象，如"删除用户时报权限错误"]

### 复现步骤
1. 操作步骤1
2. 操作步骤2
...

### 预期结果
[描述期望的正常行为]

### 实际结果
[描述实际出现的错误或异常]

### 环境信息
- 浏览器版本: [如Chrome 114]
- 后端Python版本: [如3.10]
- 操作系统: [如Windows 10]
```

## 版本迭代记录
| 时间          | 版本                  | 上传人                  | 说明                                                                 |
|-----------------|---------------------------|-------------------------|----------------------------------------------------------------------|
| 2025.5.17          | 版V0.1.1                  | 旧故里小牛                | 开始开发                                                          |
| 2025.6.2           | 版V1.5.0                  | 旧故里小牛                | 添加文章管理系统                                                   |
## 联系方式与支持
- 项目Issue追踪：[GitHub Issues]

> 本项目持续维护中，欢迎教育领域从业者、学生开发者共同参与完善，让班级管理更智能、更便捷！
> 本内容介绍为AI读取后生成，我也懒得再看，有的地方可能有问题，可以在问题反馈中提出修正，感谢！
