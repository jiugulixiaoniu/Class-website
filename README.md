# 班级网站项目详细手册

## 一、项目概述

班级网站旨在为班级成员提供一个集信息展示、成员管理、互动交流于一体平台。项目采用前后端分离架构，前端使用HTML5/CSS3/JavaScript构建，后端示例使用Flask框架（仅供学习参考）。

## 二、文件结构与功能详解

### （一）前端文件

#### 1. `Main` 目录：核心前端资源

- **`main.html`**：网站首页入口
  - 实现功能：导航栏、实时时间显示、班级介绍、功能卡片、音乐播放器
  - 注意事项：音乐播放器依赖 `music.ogg` 文件，需确保路径正确
  ```html
  <!-- 音乐播放器 -->
  <audio id="bgm" loop>
      <source src="music.ogg" type="audio/ogg">
  </audio>
  ```

- **`admin.html`**：管理员功能页面
  - 实现功能：成员管理、权限调整、访问日志查看、新用户注册
  - 注意事项：依赖后端API接口，本地运行时需启动后端服务
  ```javascript
  // 成员管理功能
  async function loadMembers() {
      try {
          const res = await fetch('http://localhost:5000/api/users', {
              headers: {'Authorization': `Bearer ${getToken()}`}
          });
          // ...其余代码
  ```

- **`GuanLi.html`**：管理控制台页面
  - 实现功能：显示管理员信息、权限等级、功能按钮
  - 注意事项：页面通过本地存储获取登录状态，需确保浏览器支持localStorage
  ```javascript
  // 更新管理面板信息
  function updateAdminPanel() {
      const authData = JSON.parse(localStorage.getItem('adminAuth') || {});
      // ...其余代码
  ```

- **`TreasureBox.html`**：百宝箱页面
  - 实现功能：智能搜索、回声洞互动
  - 注意事项：粒子动画可能影响低性能设备体验
  ```javascript
  // 粒子系统初始化
  function initParticles() {
      const canvas = document.getElementById('particleCanvas');
      // ...其余代码
  ```

- **`CopyRight.html`**：版权声明页面
  - 实现功能：展示版权信息、团队介绍
  - 注意事项：团队成员链接指向外部网站，需确认链接有效性
  ```html
  <!-- 团队成员卡片 -->
  <div class="creator-card">
      <h3>保护名字</h3>
      <a href="https://space.bilibili.com/*********" target="_blank">前往B站</a>
  </div>
  ```

- **`404.html`**：错误页面
  - 实现功能：友好提示页面不存在
  - 注意事项：确保所有内部链接正确，避免用户直接访问此页面

#### 2. `Article` 目录：文章内容

- **`article1.html`**：示例文章页面
  - 实现功能：文章展示模板
  - 使用方法：复制模板并替换内容创建新文章
  - 注意事项：图片引用需使用绝对路径或确保相对路径正确
  ```html
  <img src="images/example.jpg" alt="示例图片">
  ```

#### 3. `style` 目录：样式文件

- **`style.css`**：主样式文件
  - 覆盖范围：全局样式、导航栏、英雄区域、卡片布局
  - 修改建议：通过调整 `:root` 变量修改主题色
  ```css
  :root {
      --neon-blue: #00f3ff;
      --dark-bg: #0a0a0a;
      --accent-purple: #6a5acd;
  }
  ```

- **`style_admin.css`**：管理页面样式
  - 覆盖范围：侧边栏、成员卡片、操作按钮
  - 注意事项：部分样式依赖 SVG 数据 URI，修改时需保留格式
  ```css
  .register-form select {
      background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg ...");
  }
  ```

### （二）后端文件（示例）

#### 1. `python` 目录：后端示例代码

- **`app.py`**：Flask 后端入口
  - 实现功能：用户认证、数据接口、日志记录
  - 问题警示：
    - **不适合生产环境**：Flask 开发服务器不稳定且性能有限
    - **安全风险**：示例代码中硬编码密钥（`app.secret_key`）
    - **扩展性差**：使用 Excel 存储数据，高并发下会崩溃
  ```python
  app.secret_key = os.getenv('SECRET_KEY', 'dev_secret_key_here')
  ```

- **`Password` 目录：敏感数据示例
  - **`information.xlsx`**：用户数据表
    - 字段说明：包含用户名、显示名、密码、权限等级等
    - 使用建议：仅作示例，生产环境需使用数据库
  - **`密钥.py`**：随机密钥生成脚本
    - 功能：生成注册密钥格式的随机字符串
    - 注意事项：生成的密钥仅用于示例，不安全

### （三）配置与资源文件

- **`.idea` 目录**：开发环境配置（可忽略）
- **`favicon.ico`**：网站图标
- **`icon.png`**：页面使用图标
- **`LICENSE.txt`**：开源协议文件
- **`README.txt`**：项目说明文件

## 三、部署指南

### （一）前端部署

1. **静态托管平台推荐**
   - **GitHub Pages**：免费、自动构建（支持 GitHub Actions）
     - 配置步骤：
       1. 将 `Main` 目录提交至 GitHub 仓库
       2. 进入仓库设置，启用 GitHub Pages 功能
       3. 选择分支（通常为 `main` 或 `gh-pages`）
   - **Netlify**：提供免费 SSL 和自动部署
     - 配置步骤：
       1. 注册 Netlify 账号
       2. 链接 GitHub 仓库
       3. 设置部署目录为 `Main`
   - **Vercel**：支持环境变量配置
     - 配置步骤：
       1. 导入 GitHub 仓库
       2. 设置构建路径为 `Main`

2. **域名绑定**
   - 在托管平台设置中添加自定义域名
   - 在域名 DNS 设置中添加记录指向托管平台提供的 IP 或 CNAME

3. **性能优化建议**
   - 压缩图片资源（推荐使用 WebP 格式）
   - 合并 CSS/JS 文件减少 HTTP 请求数
   - 添加浏览器缓存控制 headers

### （二）后端部署（必须替换 Flask 示例）

1. **生产级框架选择**
   - **推荐选项**：
     - **FastAPI**：高性能 Python Web 框架，支持异步操作
     - **Django**：内置安全功能和管理界面
     - **Spring Boot**（Java）：企业级应用首选
     - **NestJS**（TypeScript）：结合 JavaScript 和类型安全

2. **数据库配置**
   - **禁止使用 Excel 存储数据**！推荐选项：
     - **MySQL**：成熟的关系型数据库
     - **PostgreSQL**：功能强大，支持复杂查询
     - **SQLite**：轻量级选项（仅限低并发场景）
   - 连接池配置建议：初始大小 5，最大 20

3. **服务器配置**
   - **推荐平台**：
     - **AWS EC2**：灵活配置，适合长期运行
     - **Heroku**：简单易用，提供免费层级
     - **Docker**：使用容器化部署确保环境一致性
   - **必须配置**：
     - 反向代理（Nginx/Apache）隐藏后端端口
     - HTTPS 加密（使用 Let's Encrypt 免费证书）
     - 环境变量管理敏感信息（如数据库密码、密钥）

4. **API 接口开发规范**
   - **认证方式**：推荐使用 JWT 或 OAuth2.0 替代示例中的简单令牌
   - **错误处理**：统一错误响应格式，包含错误代码和详细信息
   - **速率限制**：防止暴力破解和 DDoS 攻击
   - **日志记录**：记录请求方法、路径、响应时间等关键信息

## 四、使用注意事项与常见问题解答

### （一）前端使用注意事项

1. **浏览器兼容性**
   - 主要兼容现代浏览器（Chrome、Firefox、Edge 最新版本）
   - 低版本 IE 浏览器可能无法正常显示（项目未做兼容处理）

2. **响应式设计限制**
   - 虽然采用弹性布局，但在超小屏幕（<320px）上可能显示异常
   - 解决方法：为关键元素设置最小宽度，或添加专属移动端样式

3. **音乐播放器使用**
   - 音乐文件必须与页面同源，或配置 CORS 支持，建议music（后缀任意）放在main.html文件同级目录，不然会无法读取，我并没有给music文件，请自己加入
   - 自动播放限制：大多数浏览器禁止静默自动播放
     - 解决方法：添加用户交互触发播放，或显示播放提示

4. **本地存储使用**
   - 管理员状态存储在 localStorage 中，清除浏览器数据会退出登录
   - 存储量限制：单域通常限制为 5MB

### （二）后端开发注意事项

1. **示例代码问题总结**
   - **数据存储不安全**：Excel 文件直接暴露在项目目录中
   - **无输入验证**：容易受到注入攻击
   - **硬编码密钥**：`app.secret_key` 应通过环境变量配置
   - **缺少速率限制**：容易被暴力破解
   - **日志记录不足**：生产环境需详细记录请求参数和错误堆栈

2. **安全开发建议**
   - **密码处理**：永远不要明文存储密码！使用哈希算法（如 bcrypt）
   - **SQL 注入防护**：使用参数化查询或 ORM 框架
   - **XSS 防护**：对所有用户输入进行 HTML 编码
   - **CSRF 防护**：为表单添加 CSRF 令牌验证
   - **敏感数据传输**：确保所有 API 使用 HTTPS

3. **性能优化建议**
   - **缓存策略**：为静态资源设置远期 Expires 头
   - **数据库索引**：对频繁查询的字段（如用户名）添加索引
   - **异步操作**：使用消息队列处理耗时任务（如发送邮件）

### （三）常见问题解答

#### 1. 为什么登录时提示“AUTH_FAILED”？

可能原因：
- 用户名或密码错误
- 权限不足（检查用户等级）
- 后端服务未启动（检查 API 是否响应）

解决方法：
- 确认输入格式正确（用户名区分大小写）
- 检查后端日志定位错误
- 确保使用的是正确后端服务（非 Flask 示例）

#### 2. 成员管理页面空白？

可能原因：
- 后端 API 接口不可用
- 返回数据格式错误
- 浏览器阻止跨域请求

解决方法：
- 检查浏览器开发者工具的 Console 和 Network 面板
- 确认后端 CORS 配置正确
- 验证 API 返回数据结构是否与前端期望一致

#### 3. 部署后音乐无法播放？

可能原因：
- 音乐文件路径错误
- 服务器未正确配置媒体文件 MIME 类型
- 音频格式不被浏览器支持

解决方法：
- 确认 `music.ogg` 文件存在于服务器对应目录
- 添加正确的 Nginx/Apache 配置：
  ```nginx
  location ~ \.ogg$ {
      types {
          audio/ogg ogg;
      }
  }
  ```
- 提供多种音频格式（如 MP3）确保兼容性

## 五、开源协议与版权说明

### （一）开源协议

本项目采用 **GNU General Public License (GPL)** 协议。这意味着：

1. **允许的行为**：
   - 免费使用项目进行非商业目的
   - 查看、修改源代码
   - 分发修改后的版本（需遵守相同协议）
   - 在衍生作品中使用部分代码

2. **禁止的行为**：
   - **任何商业化用途**：包括但不限于广告、付费服务、企业内部使用
   - 移除或修改版权声明和协议信息
   - 分发闭源的修改版本

3. **责任声明**：
   - 项目按“原样”提供，不保证其适用于任何特定用途
   - 作者不承担因使用本项目产生的任何直接或间接损失

### （二）版权信息

1. **美术资源**：
   - 网站设计、图标、装饰元素等版权归“旧故里工作室”所有
   - 禁止单独提取使用美术资源进行其他项目开发

2. **代码部分**：
   - 代码结构和算法受版权保护
   - 修改后的代码需保留原始作者信息

3. **第三方组件**：
   - 项目可能引用开源库（如 Font Awesome 图标、jQuery 等）
   - 使用第三方组件需遵守其各自的许可证要求

## 六、贡献指南

### （一）如何贡献代码

1. **叉仓库（Fork）**：
   - 在 GitHub 上叉取本项目至您的个人账户

2. **创建特性分支**：
   ```bash
   git checkout -b feature-your-improvement
   ```

3. **提交更改**：
   - 遵循编码规范（保持代码风格一致）
   - 编写有意义的提交信息

4. **发起拉取请求（Pull Request）**：
   - 详细描述更改内容和动机
   - 确保通过所有 CI 测试

### （二）贡献类型

1. **代码改进**：
   - 性能优化
   - 新功能开发（需符合项目定位）
   - 安全漏洞修复

2. **文档完善**：
   - 补充使用说明
   - 更新教程和示例

3. **翻译支持**：
   - 帮助将文档翻译为其他语言
   - 确保翻译准确性

### （三）不接受的贡献

1. **商业化特性**：
   - 任何涉及广告、支付集成的代码
   - 企业级功能（如数据分析、营销工具）

2. **与教育无关的内容**：
   - 娱乐性质的功能扩展
   - 社交媒体集成（除非与班级管理直接相关）

3. **重复功能**：
   - 已存在功能的代码重构（除非显著改进）

## 七、联系方式

遇到问题或建议时，请通过以下方式联系：

1. **GitHub Issues**：
   - 提交问题时请详细描述现象、环境、复现步骤
   - 使用提供的 Issue 模板

2. **邮箱支持**：
   - 仅用于严重漏洞报告
   - 邮件主题请注明“班级网站项目”

3. **社区支持**：
   - 加入项目官方交流群（文档中提供信息）
   - 参与月度开发讨论会议

---
## 八、上线日记

| 时间         | 内容                                       | 更新者           | 更新版本                |
| ---------- | ---------------------------------------- | ------------- | -------------------- |
| 2025-5.18 | 正式开发                                     | JiuGuLiXiaoNiu      | V0.1.1.0517          |
**最后提醒**：请在使用本项目前仔细阅读 LICENSE.txt 文件，确保您的使用方式符合开源协议要求。任何违反协议的行为将被追究法律责任。
